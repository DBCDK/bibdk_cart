<?php

class BibdkCartTestCase extends DrupalWebTestCase {

  public static function getInfo() {
    return array(
      'name' => t('Bibdk Cart test'),
      'description' => t('Test Cart functionality'),
      'group' => t('Bibliotek.dk - Cart'),
    );
  }

  public function setUp() {
    parent::setUp('bibdk_cart', 'ting_openformat');
    variable_set('ting_search_url', 'lakiseks.dbc.dk/openbibdk/0.5/');
  }

  /**
   * Tests the output data of bibdk_adhl.ajax.inc
   */
  public function testAjaxReesponse() {

    $pid = '870970-basis:29225605';

    $url = $this->getAbsoluteUrl('cart/ajax');

    $options = array(
      'query' => array(
        'pid' => $pid,
      ),
    );

    $result = $this->drupalGetAJAX($url, $options);
    $this->assertRaw('pid', 'Received pid');

  }
}
